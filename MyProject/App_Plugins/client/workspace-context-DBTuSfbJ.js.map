{"version":3,"file":"workspace-context-DBTuSfbJ.js","sources":["../../TestExtension/client/src/name-manipulation/workspace-context.ts"],"sourcesContent":["import { UmbControllerBase } from \"@umbraco-cms/backoffice/class-api\";\r\nimport type { UmbControllerHost } from \"@umbraco-cms/backoffice/controller-api\";\r\nimport { UMB_CONTENT_WORKSPACE_CONTEXT } from \"@umbraco-cms/backoffice/content\";\r\nimport { UmbVariantId } from \"@umbraco-cms/backoffice/variant\";\r\n\r\nexport class NameManipulationWorkspaceContext extends UmbControllerBase  {\r\n    constructor(host: UmbControllerHost) {\r\n        super(host);\r\n\r\n        console.log(\"NameManipulationWorkspaceContext: Constructor called\");\r\n        \r\n        this.consumeContext(UMB_CONTENT_WORKSPACE_CONTEXT, async (workspace) => {\r\n            console.log(\"NameManipulationWorkspaceContext: Workspace context consumed\", workspace);\r\n            if (!workspace) return;\r\n            await workspace.isLoaded();\r\n            // Set the name if it's already empty (We do not want to overwrite if it's a Blueprint)\r\n            // Notice we need to provide a Variant-ID to getName, as Document names are variant specific.\r\n            // Here we get the Invariant name â€” this will need to be extended if you are looking to support multiple variants.\r\n            const variantId = UmbVariantId.CreateInvariant();\r\n            const name = workspace.getName(variantId);\r\n            if (name === undefined) {\r\n                const manipulatedName = `New Document - ${new Date().toLocaleDateString(\r\n                \"en-US\"\r\n                )}`;\r\n                workspace.setName(manipulatedName, variantId);\r\n            }\r\n        });\r\n  }\r\n}\r\n\r\nexport { NameManipulationWorkspaceContext as api };"],"names":["NameManipulationWorkspaceContext","UmbControllerBase","host","UMB_CONTENT_WORKSPACE_CONTEXT","workspace","variantId","UmbVariantId","manipulatedName"],"mappings":";;;AAKO,MAAMA,UAAyCC,EAAmB;AAAA,EACrE,YAAYC,GAAyB;AACjC,UAAMA,CAAI,GAEV,QAAQ,IAAI,sDAAsD,GAElE,KAAK,eAAeC,GAA+B,OAAOC,MAAc;AAEpE,UADA,QAAQ,IAAI,gEAAgEA,CAAS,GACjF,CAACA,EAAW;AAChB,YAAMA,EAAU,SAAA;AAIhB,YAAMC,IAAYC,EAAa,gBAAA;AAE/B,UADaF,EAAU,QAAQC,CAAS,MAC3B,QAAW;AACpB,cAAME,IAAkB,mBAAkB,oBAAI,KAAA,GAAO;AAAA,UACrD;AAAA,QAAA,CACC;AACD,QAAAH,EAAU,QAAQG,GAAiBF,CAAS;AAAA,MAChD;AAAA,IACJ,CAAC;AAAA,EACP;AACF;"}